# 语音功能测试指南

## 测试前准备

### 1. 浏览器检查
确保使用以下浏览器之一：
- Chrome 60+ (推荐)
- Edge 79+
- Safari 14.1+

### 2. 权限授权
1. 访问应用页面
2. 当浏览器提示麦克风权限时，点击"允许"
3. 如果错过了提示，点击地址栏的锁形图标重新授权

### 3. 环境准备
- 确保在相对安静的环境中测试
- 检查设备麦克风和扬声器是否正常工作
- 调整音量到合适水平

## 测试步骤

### 测试1: 语音输入功能

#### 步骤:
1. 打开应用页面
2. 在"对方的话"输入框中点击右侧的麦克风图标 🎤
3. 看到图标变红色且显示"正在识别语音..."时开始说话
4. 测试语句："这是一个语音输入测试，我想看看识别效果如何"
5. 停止说话，等待3秒自动停止录音
6. 检查文字是否正确添加到输入框中

#### 预期结果:
- 麦克风图标变红色
- 输入框边框变蓝色
- 显示"正在识别语音..."状态
- 说话时实时显示蓝色文字
- 停止后文字自动添加到输入框

### 测试2: 语音播放功能

#### 步骤:
1. 在输入框中输入或通过语音输入一些文字
2. 点击输入框上方的"播放"按钮 🔊
3. 听取语音播放效果
4. 点击"停止播放"按钮测试停止功能

#### 预期结果:
- 点击播放后开始语音朗读
- 播放按钮变为"停止播放"
- 可以正常停止播放

### 测试3: 回复语音播放

#### 步骤:
1. 输入一些测试文字："请问贵公司的财务制度执行情况如何？"
2. 点击"开始沟通"生成回复
3. 在生成的回复卡片中点击"播放"按钮
4. 听取AI生成回复的语音播放

#### 预期结果:
- 每个回复都有独立的播放按钮
- 点击后开始播放该条回复
- 播放时显示播放状态
- 右下角显示播放提示框

### 测试4: 语音命令功能

#### 步骤:
1. 点击顶部蓝色面板中的"语音命令"按钮
2. 看到按钮变红色后，说出测试命令：

**测试命令列表:**
- "开始沟通" (应该开始生成回复)
- "清空输入" (应该清空输入框)
- "增强语气" (语气强度应该增加)
- "减弱语气" (语气强度应该减少)

#### 预期结果:
- 命令识别成功后显示绿色成功消息
- 对应功能被正确执行
- 显示"最近执行：[命令名称]"

## 常见问题测试

### 问题1: 麦克风权限
如果语音功能不工作：
1. 检查浏览器地址栏是否有麦克风图标
2. 点击图标，确保麦克风权限为"允许"
3. 刷新页面重试

### 问题2: 语音识别不准确
测试改进方法：
1. 在更安静的环境中重试
2. 靠近麦克风说话
3. 语速适中，发音清晰
4. 使用标准普通话

### 问题3: 语音播放无声音
检查项目：
1. 设备音量是否开启
2. 浏览器是否被静音
3. 扬声器是否正常工作

## 功能验收标准

### ✅ 语音输入功能合格标准:
- [ ] 能够正常启动语音识别
- [ ] 实时显示识别文字
- [ ] 自动停止录音
- [ ] 文字正确添加到输入框
- [ ] 支持连续录入

### ✅ 语音播放功能合格标准:
- [ ] 输入内容能够正常播放
- [ ] 生成回复能够正常播放
- [ ] 播放状态显示正确
- [ ] 能够停止播放

### ✅ 语音命令功能合格标准:
- [ ] 能够识别"开始沟通"命令
- [ ] 能够识别"清空输入"命令
- [ ] 能够识别"增强语气"命令
- [ ] 能够识别"减弱语气"命令
- [ ] 命令执行后有正确反馈

## 性能测试

### 响应时间测试:
- 语音识别启动时间: < 2秒
- 文字转换延迟: < 1秒
- 语音播放启动: < 1秒
- 命令执行响应: < 2秒

### 准确性测试:
- 中文识别准确率: > 90%
- 命令识别准确率: > 95%
- 语音播放清晰度: 良好

## 测试报告模板

```
测试日期: [日期]
测试浏览器: [浏览器名称和版本]
测试设备: [设备信息]

语音输入功能: [✅通过 / ❌失败]
语音播放功能: [✅通过 / ❌失败]
语音命令功能: [✅通过 / ❌失败]

问题记录:
1. [问题描述]
2. [问题描述]

总体评价: [优秀/良好/一般/较差]
```

## 高级测试

### 多语言测试 (如果需要):
测试英文输入："This is a test for English speech recognition"

### 噪音环境测试:
在有背景噪音的环境中测试识别准确性

### 连续使用测试:
连续使用30分钟，检查性能是否稳定

### 移动端测试:
在手机浏览器中测试所有功能

完成所有测试后，语音功能应该能够为审计师提供流畅、准确的语音交互体验。 